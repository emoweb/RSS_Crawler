---

# よく使うデータの参照元
dmy:
  # HTMLの冗長データを削除
  short_html:
    &short_html
    - &cut_crlf '[\r\n]'
    - &cut_tagspace ['\s*([<>])\s*', '\1']
    - &cut_divclass ['<div\s((class|style|id)=\"[^\"]*\"\s*)*>', '<div>']
    - &cut_tagclass ['<(div|p|span)\s((class|style|name|id)=\"[^\"]*\"\s*)*>', '<\1>']

# pipe_procedureの引数そのまま.
# filter等はRegexpに変換される.
# keyはname
:pipe_procedure:
  # NHK解説アーカイブス
  nhk_kaisetsu:
    :feed: 'http://www.nhk.or.jp/kaisetsu-blog/index.xml'
    :fetch:
      :xpath: '//div[@class="article"]'
      :replace: *short_html
      :abslink: true
  
  # GIGAZINE
  gigazine:
    :feed: 'http://gigazine.net/news/rss_2.0/'
    :filter: '^PR:\s'
    :fetch:
      :xpath: '//p[@class="preface"]'
      :replace: [
        *cut_crlf, *cut_tagspace, *cut_divclass,
        ['<br><br><b>・関連記事.*</p>', '</p>']
      ]
  
  # Gizmodo : http://www.gizmodo.jp/
  gizmodo:
    :feed: 'http://www.gizmodo.jp/index.xml'
    :fetch:
      :xpath: '//div[@class="cXenseParse"]'
      :replace: [ *cut_crlf ]
      :update_url: 'rm_query'
  
  # TechCrunch Japan » TechCrunch : http://jp.techcrunch.com/
  techcrunch:
    :feed: 'http://jp.techcrunch.com/feed/'
    :filter: '^P[Rr]:\s'
  
  # 痛いニュース(ﾉ∀`) : http://blog.livedoor.jp/dqnplus/
  dqnplus:
    :feed: 'http://blog.livedoor.jp/dqnplus/index.rdf'
    :fetch:
      :xpath: '//div[@class="blogbody"]'
      :replace:
        - *cut_crlf
        -
          - '^.*<\!-- google_ad_section_start -->(.*?)<div class="posted"></div>.*$'
          - '\1'
  
  # フリーソフトの樹 : http://freesoftnoki.blog87.fc2.com/
  freesoftnoki:
    :feed: 'http://feedproxy.google.com/frnoki'
    :fetch:
      :xpath: '//td[@class="main_txt"]'
      :replace:
        - *cut_crlf
        - *cut_tagspace
        - ['<div align=\"left\">.*(</td>)', '\1']
      :abslink: true
  
  # Wired
  wired:
    :feed: 'http://wired.jp/feed/'
    :filter: '^PR:\s'
    :fetch:
      :xpath: '//div[@class="article_maincontents"]'
      :replace:
        - *cut_crlf
        - ['<!-- impAct AD -->.*</div>', '</div>']
        - ['(<\w+)\sclass=\"[^\"]+">', '\1>']
        - *cut_tagspace
      :abslink: true
  

  # Cyclist
  cyclist:
    :feed: 'http://cyclist.sanspo.com/feed'
    :fetch:
      :xpath: '//div[@class="description clearfix"]'
      :abslink: true
      
  # 窓の杜 : http://www.forest.impress.co.jp/
  forest_impress:
    :feed: 'http://www.forest.impress.co.jp/rss.xml'
    :filter: 'アクセスランキング|ダイジェストニュース|かうんとだうん|アップデート'
    :fetch:
      :xpath: '//div[@class="main-contents mainContents"]'
      :replace: [ *cut_crlf, *cut_tagspace ]
      :abslink: true
  
  # ITPro
  itpro:
    :feed: 'http://itpro.nikkeibp.co.jp/rss/news.rdf'
    :filter: '^［PR］'
    :fetch:
      :xpath: '//div[@id="kiji"]'
      :replace:
        - ['("[^"]+)&amp;([^"]+")', '\1&\2']
        - *cut_divclass
      :abslink: true
  
  # Tools 4 Hack
  tools4hack:
    :feed: 'http://tools4hack.santalab.me/feed'
    :fetch:
      :xpath: '//div[@id="the-content"]'
      :replace:
        - *cut_crlf
        - ['<!-- 広告 -->.*?<h2>', '<h2>']
        - *cut_divclass
        - *cut_tagspace
  
  # 廃止検討
  excite_odd:
    :feed: 'http://www.excite.co.jp/News/rss/odd/'
    :filter: '^PR:\s'
    :fetch:
      :xpath: '//div[@class="story"]'
      :abslink: true
  
  excite_koneta:
    :feed: 'http://www.excite.co.jp/News/rss/source/?source=Excite'
    :filter: '^PR:\s'
    :fetch:
      :xpath: '//div[@class="story"]'
      :abslink: true
      